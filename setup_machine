#!/usr/bin/env bash

. lib/helpers.sh

if ! [[ -e `which brew` ]]; then
  print_with_color $YELLOW "Installing Homebrew"
  ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
fi

if ! [[ `brew list | grep rbenv` ]]; then
  print_with_color $YELLOW "Installing rbenv"
  brew install rbenv
fi

if ! [[ `brew list | grep z` ]]; then
  print_with_color $YELLOW "Installing z"
  brew install z
fi

if ! [[ `brew list | grep wget` ]]; then
  print_with_color $YELLOW "Installing wget"
  brew install wget
fi

print_with_color $GREEN 'Updating Homebrew'
brew update

. bash/setup_bash.sh
. git/setup_git.sh
. sublime/setup_sublime.sh
. atom/setup_atom.sh
. iterm/setup_iterm.sh

if ! [[ -e '/Applications/Google Chrome.app' ]] && ! [[ -e "$HOME/Applications/Google Chrome.app" ]]; then
  print_with_color $GREEN 'Chrome is not installed. Downloading...'
  brew cask install google-chrome
fi

if ! [[ -e '/Applications/Alfred 2.app' ]] && ! [[ -e "$HOME/Applications/Alfred 2.app" ]]; then
  print_with_color $GREEN 'Alfred is not installed. Downloading...'
  brew cask install alfred
fi

if ! [[ -e '/Applications/Dropbox.app' ]] && ! [[ -e "$HOME/Applications/Dropbox.app" ]]; then
  print_with_color $GREEN 'Dropbox is not installed. Downloading...'
  brew cask install dropbox
fi

if ! [[ -e '/Applications/1Password 5.app' ]] && ! [[ -e "$HOME/Applications/1Password 5.app" ]]; then
  print_with_color $GREEN '1Password is not installed. Downloading...'
  brew cask install 1password
fi

if ! [[ -e '/Applications/Spectacle.app' ]] && ! [[ -e "$HOME/Applications/Spectacle.app" ]]; then
  print_with_color $GREEN 'Spectacle is not installed. Downloading...'
  brew cask install spectacle
fi

. $HOME/.bash_profile
